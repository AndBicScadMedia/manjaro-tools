#!/bin/sh

[[ -r /opt/livecd/util.sh ]] && source /opt/livecd/util.sh

load_profile_config "/opt/livecd/profile.conf"

[[ -r /opt/livecd/util-livecd.sh ]] && source /opt/livecd/util-livecd.sh

CONSOLEFONT="$(kernel_cmdline vconsole.font)"
CONSOLEMAP="$(kernel_cmdline vconsole.font.map)"
arch=$(uname -m)

# Activate swap
configure_swap

configure_language
locale-gen

# Add BROWSER var in env and workaround for mate-terminal
configure_env

configure_machine_id

configure_sudo

depmod $(cat /usr/lib/modules/$(uname -r)/extramodules/version)

${autologin} && configure_displaymanager_autologin

configure_user_root /
cp -a /etc/skel/. /root/

configure_alsa /
# Save settings
alsactl -f /etc/asound.state store &>/dev/null

